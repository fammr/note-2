# Java线程间的通信——wait及notify方法

- wait，notify和notifyAll方法是Object类的成员函数，所以Java的任何一个对象都能够调用这三个方法。
- 这三个方法主要是用于线程间通信，协调多个线程的运行。

### wait()方法

- 调用线程的sleep，yield方法时，线程并不会让出对象锁，wait却不同。
- **wait方法必须在同步代码块中调用(也就是当前线程必须持有对象的锁)**。
- wait方法的作用是放弃对象的锁并等到其他线程调用notify()/notifyAll()方法唤醒。
- 需要注意的是：被唤醒并不代表立即获得对象的锁。
- 也就是说，一个线程调用了对象的wait方法后，他需要等待两件事情的发生：
  1. 有其他线程调用同一个对象的notify或者notifyAll方法（调用notify/notifyAll方法之前）。
  2. 被唤醒之后重新获得对象的锁(调用notify/notifyAll方法之后)。
- 如果一个线程调用了某个对象的wait方法，但是后续并没有其他线程调用该对象的notify或者notifyAll方法，则该线程将会永远等下去。

### notify()和notifyAll()方法

- **notofy/notifyAll方法也必须在同步代码块中调用(也就是调用线程必须持有对象的锁)**。
- notify()会唤醒一个调用了该对象的wait()方法的线程（这种选择是随意的，和具体实现有关），而notifyAll方法会唤醒所有正在等待的线程。
- 还有一点需要特别强调：**调用notify和notifyAll方法后，当前线程并不会立即放弃锁的持有权，而必须要等待当前同步代码块执行完才会让出锁。**
- 如果一个对象之前没有调用wait方法，那么调用notify方法是没有任何影响的。